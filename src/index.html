<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#E8F5F2">
  <title>AI督学 - 小影老师</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg">
  <link rel="apple-touch-icon" href="assets/images/app-icon.png">
  
  <!-- FontAwesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/app.css">
  
  <!-- iOS PWA Support -->
  <meta name="apple-mobile-web-app-title" content="AI督学">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <div class="app-container" id="app">
    
    <!-- ==========================================
         首页 - 虚拟人小影老师
         ========================================== -->
    <div class="page page-home active" id="page-home">
      <!-- 虚拟人视频区域 -->
      <div class="avatar-section">
        <div class="avatar-wrapper">
          <video 
            id="avatar-video" 
            class="avatar-video" 
            autoplay 
            loop 
            muted 
            playsinline
            poster="assets/images/avatar-poster.jpg"
          >
            <source src="assets/images/xiaoying-avatar.mp4" type="video/mp4">
          </video>
        </div>
        <h1 class="avatar-name">小影老师</h1>
        <p class="avatar-intro">你的专属AI督学伙伴</p>
      </div>
      
      <!-- 今日任务概览 -->
      <div class="home-stats">
        <div class="stat-card">
          <div class="stat-icon">🎯</div>
          <div class="stat-info">
            <span class="stat-number" id="today-tasks">0</span>
            <span class="stat-label">今日任务</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">⭐</div>
          <div class="stat-info">
            <span class="stat-number" id="total-stars">0</span>
            <span class="stat-label">获得星星</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">🔥</div>
          <div class="stat-info">
            <span class="stat-number" id="streak-days">0</span>
            <span class="stat-label">连续天数</span>
          </div>
        </div>
      </div>
      
      <!-- 主操作按钮 -->
      <div class="home-actions">
        <button class="btn-start-mission" id="btn-start-mission">
          <i class="fa-solid fa-rocket"></i>
          <span>开始特工任务</span>
        </button>
        <button class="btn-set-tasks" id="btn-set-tasks">
          <i class="fa-solid fa-list-check"></i>
          <span>设置今日任务</span>
        </button>
      </div>
      
      <!-- AI提示 -->
      <p class="ai-disclaimer">小影老师由 AI 驱动</p>
    </div>
    
    <!-- ==========================================
         任务设置页面
         ========================================== -->
    <div class="page page-tasks" id="page-tasks">
      <!-- 头部 -->
      <header class="page-header">
        <button class="btn-back" id="btn-back-tasks">
          <i class="fa-solid fa-chevron-left"></i>
        </button>
        <h1 class="page-title">特工任务设置</h1>
        <button class="btn-add-task" id="btn-add-task">
          <i class="fa-solid fa-plus"></i>
        </button>
      </header>
      
      <!-- 任务列表 -->
      <div class="task-list-container">
        <div class="task-list" id="task-list">
          <!-- 任务项会通过JS动态生成 -->
        </div>
        
        <!-- 空状态 -->
        <div class="empty-state" id="empty-tasks">
          <div class="empty-icon">📋</div>
          <p class="empty-text">还没有任务哦</p>
          <p class="empty-hint">点击右上角 + 添加今日任务</p>
        </div>
      </div>
      
      <!-- 底部确认按钮 -->
      <div class="tasks-footer">
        <button class="btn-confirm-tasks" id="btn-confirm-tasks">
          <i class="fa-solid fa-check"></i>
          <span>确认任务，开始督学</span>
        </button>
      </div>
    </div>
    
    <!-- ==========================================
         视频督学页面 - 核心功能
         ========================================== -->
    <div class="page page-study" id="page-study">
      <!-- 顶部状态栏 -->
      <header class="study-header">
        <div class="study-timer">
          <i class="fa-solid fa-clock"></i>
          <span id="study-time">00:00</span>
        </div>
        <div class="study-status">
          <span class="status-dot active"></span>
          <span id="focus-status">专注中</span>
        </div>
        <button class="btn-minimize" id="btn-minimize">
          <i class="fa-solid fa-compress"></i>
        </button>
      </header>
      
      <!-- 虚拟人监督区 -->
      <div class="study-avatar-area">
        <div class="study-avatar-wrapper">
          <video 
            id="study-avatar-video" 
            class="study-avatar-video" 
            autoplay 
            loop 
            muted 
            playsinline
          >
            <source src="assets/images/xiaoying-avatar.mp4" type="video/mp4">
          </video>
        </div>
        
        <!-- AI说话气泡 -->
        <div class="speech-bubble" id="speech-bubble">
          <p id="ai-message">加油！你正在认真学习呢~</p>
        </div>
      </div>
      
      <!-- 当前任务卡片 -->
      <div class="current-task-card" id="current-task-card">
        <div class="task-badge">当前任务</div>
        <h3 class="task-title" id="current-task-name">语文 - 背诵古诗</h3>
        <div class="task-progress-bar">
          <div class="task-progress-fill" id="task-progress" style="width: 0%"></div>
        </div>
        <div class="task-info">
          <span class="task-reward"><i class="fa-solid fa-star"></i> +20</span>
          <span class="task-duration">预计 10 分钟</span>
        </div>
      </div>
      
      <!-- 任务队列预览 -->
      <div class="task-queue">
        <p class="queue-label">接下来：</p>
        <div class="queue-items" id="queue-items">
          <!-- 动态生成 -->
        </div>
      </div>
      
      <!-- 底部控制栏 -->
      <div class="study-controls">
        <button class="control-btn" id="btn-pause">
          <i class="fa-solid fa-pause"></i>
          <span>暂停</span>
        </button>
        <button class="control-btn primary" id="btn-complete-task">
          <i class="fa-solid fa-check"></i>
          <span>完成任务</span>
        </button>
        <button class="control-btn danger" id="btn-end-study">
          <i class="fa-solid fa-stop"></i>
          <span>结束</span>
        </button>
      </div>
    </div>
    
    <!-- ==========================================
         任务完成庆祝页面
         ========================================== -->
    <div class="page page-celebrate" id="page-celebrate">
      <div class="celebrate-content">
        <div class="celebrate-icon">🎉</div>
        <h1 class="celebrate-title">太棒了！</h1>
        <p class="celebrate-text" id="celebrate-text">你完成了今天的所有任务</p>
        
        <div class="celebrate-stats">
          <div class="celebrate-stat">
            <span class="celebrate-number" id="celebrate-time">45</span>
            <span class="celebrate-label">学习分钟</span>
          </div>
          <div class="celebrate-stat">
            <span class="celebrate-number" id="celebrate-tasks">5</span>
            <span class="celebrate-label">完成任务</span>
          </div>
          <div class="celebrate-stat">
            <span class="celebrate-number" id="celebrate-stars">100</span>
            <span class="celebrate-label">获得星星</span>
          </div>
        </div>
        
        <button class="btn-back-home" id="btn-celebrate-home">
          <i class="fa-solid fa-home"></i>
          <span>返回首页</span>
        </button>
      </div>
    </div>
    
    <!-- ==========================================
         添加任务弹窗
         ========================================== -->
    <div class="modal" id="modal-add-task">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>添加特工任务</h2>
          <button class="modal-close" id="modal-close">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>任务名称</label>
            <input type="text" id="input-task-name" placeholder="例如：语文作业、背诵古诗...">
          </div>
          <div class="form-group">
            <label>预计时间（分钟）</label>
            <div class="time-options">
              <button class="time-option" data-time="5">5分钟</button>
              <button class="time-option active" data-time="10">10分钟</button>
              <button class="time-option" data-time="15">15分钟</button>
              <button class="time-option" data-time="20">20分钟</button>
              <button class="time-option" data-time="30">30分钟</button>
            </div>
          </div>
          <div class="form-group">
            <label>任务类型</label>
            <div class="type-options">
              <button class="type-option active" data-type="语文">
                <span class="type-icon">📖</span>
                <span>语文</span>
              </button>
              <button class="type-option" data-type="数学">
                <span class="type-icon">🔢</span>
                <span>数学</span>
              </button>
              <button class="type-option" data-type="英语">
                <span class="type-icon">🔤</span>
                <span>英语</span>
              </button>
              <button class="type-option" data-type="阅读">
                <span class="type-icon">📚</span>
                <span>阅读</span>
              </button>
              <button class="type-option" data-type="其他">
                <span class="type-icon">✏️</span>
                <span>其他</span>
              </button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-modal-confirm" id="btn-save-task">
            <i class="fa-solid fa-plus"></i>
            添加任务
          </button>
        </div>
      </div>
    </div>
    
  </div>
  
  <!-- JavaScript -->
  <script src="js/app.js"></script>
</body>
</html>
