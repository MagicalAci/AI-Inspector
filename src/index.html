<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#E8F5F2">
  <title>AI督学 - 小影老师</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg">
  
  <!-- FontAwesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/app.css">
</head>
<body>
  <div class="app-container" id="app">
    
    <!-- ==========================================
         侧边栏菜单（详细档案）
         ========================================== -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-overlay" id="sidebar-overlay"></div>
      <div class="sidebar-content">
        <!-- 用户信息头部 -->
        <div class="sidebar-header">
          <div class="sidebar-avatar">
            <img src="assets/images/user-avatar.svg" alt="用户头像">
          </div>
          <div class="sidebar-user-info">
            <h3 id="sidebar-user-name">小明同学</h3>
            <div class="sidebar-level-badge" id="sidebar-level-badge">
              <span class="level-icon">🎖️</span>
              <span class="level-name" id="sidebar-level-name">见习特工</span>
            </div>
          </div>
        </div>
        
        <!-- 特工档案卡片 -->
        <div class="sidebar-agent-card">
          <div class="agent-card-title">📋 特工档案</div>
          
          <!-- 等级进度 -->
          <div class="agent-level-section">
            <div class="level-info">
              <span>当前等级</span>
              <span class="level-current" id="sidebar-level-current">Lv.1</span>
            </div>
            <div class="level-progress-wrap">
              <div class="level-progress-bar">
                <div class="level-progress-fill" id="sidebar-level-progress" style="width: 30%"></div>
              </div>
              <span class="level-progress-text" id="sidebar-next-level">距下级 70 积分</span>
            </div>
          </div>
          
          <!-- 累计数据 -->
          <div class="agent-data-grid">
            <div class="agent-data-item">
              <span class="data-value" id="sidebar-total-stars">0</span>
              <span class="data-label">特工积分</span>
            </div>
            <div class="agent-data-item">
              <span class="data-value" id="sidebar-total-missions">0</span>
              <span class="data-label">完成任务</span>
            </div>
            <div class="agent-data-item">
              <span class="data-value" id="sidebar-total-time">0h</span>
              <span class="data-label">学习时长</span>
            </div>
            <div class="agent-data-item">
              <span class="data-value" id="sidebar-streak">0</span>
              <span class="data-label">连续天数</span>
            </div>
          </div>
        </div>
        
        <!-- 菜单列表 -->
        <div class="sidebar-menu">
          <div class="menu-item" data-page="history">
            <i class="fa-solid fa-clock-rotate-left"></i>
            <span>任务记录</span>
            <i class="fa-solid fa-chevron-right menu-arrow"></i>
          </div>
          <div class="menu-item" data-page="achievements">
            <i class="fa-solid fa-medal"></i>
            <span>特工成就</span>
            <span class="menu-badge">3</span>
            <i class="fa-solid fa-chevron-right menu-arrow"></i>
          </div>
          <div class="menu-item" data-page="parent">
            <i class="fa-solid fa-user-shield"></i>
            <span>家长中心</span>
            <i class="fa-solid fa-chevron-right menu-arrow"></i>
          </div>
          <div class="menu-divider"></div>
          <div class="menu-item" data-page="vip">
            <i class="fa-solid fa-crown"></i>
            <span>高级特工</span>
            <span class="menu-tag vip">VIP</span>
            <i class="fa-solid fa-chevron-right menu-arrow"></i>
          </div>
          <div class="menu-item" data-page="settings">
            <i class="fa-solid fa-gear"></i>
            <span>设置</span>
            <i class="fa-solid fa-chevron-right menu-arrow"></i>
          </div>
        </div>
        
        <!-- 底部 -->
        <div class="sidebar-footer">
          <p>AI督学 v1.0</p>
        </div>
      </div>
    </div>
    
    <!-- ==========================================
         首页（简洁版）
         ========================================== -->
    <div class="page page-home active" id="page-home">
      <!-- 顶部栏 -->
      <header class="home-header">
        <button class="user-avatar-btn" id="btn-open-sidebar">
          <img src="assets/images/user-avatar.svg" alt="用户头像">
          <span class="level-dot" id="home-level-dot">1</span>
        </button>
        <div class="header-right">
          <button class="balance-btn" id="btn-balance">
            <i class="fa-solid fa-coins"></i>
            <span id="user-balance">0</span>
          </button>
          <button class="recharge-btn" id="btn-recharge">
            首充
          </button>
        </div>
      </header>
      
      <!-- 虚拟人区域 -->
      <div class="avatar-section">
        <div class="avatar-wrapper">
          <video 
            id="avatar-video" 
            class="avatar-video" 
            autoplay 
            loop 
            muted 
            playsinline
          >
            <source src="assets/images/xiaoying-avatar.mp4" type="video/mp4">
          </video>
        </div>
        <h1 class="avatar-name">小影老师</h1>
        <p class="avatar-greeting" id="avatar-greeting">今天也要加油学习哦~</p>
      </div>
      
      <!-- 简洁统计条 -->
      <div class="home-stats-bar">
        <div class="stat-item">
          <span class="stat-icon">📋</span>
          <span class="stat-value" id="today-tasks">0</span>
          <span class="stat-label">今日任务</span>
        </div>
        <div class="stat-divider"></div>
        <div class="stat-item">
          <span class="stat-icon" id="level-icon">🎖️</span>
          <span class="stat-value" id="agent-level-short">Lv.1</span>
          <span class="stat-label" id="agent-level-name">见习特工</span>
        </div>
        <div class="stat-divider"></div>
        <div class="stat-item">
          <span class="stat-icon">🔥</span>
          <span class="stat-value" id="streak-days">0</span>
          <span class="stat-label">连续天数</span>
        </div>
      </div>
      
      <!-- 待执行任务列表（有任务时显示）-->
      <div class="pending-tasks" id="pending-tasks" style="display: none;">
        <div class="pending-header">
          <span class="pending-title">📋 待执行任务</span>
          <button class="btn-edit-tasks" id="btn-edit-tasks">
            <i class="fa-solid fa-plus"></i> 添加
          </button>
        </div>
        <div class="pending-list" id="pending-list">
          <!-- 动态生成 -->
        </div>
      </div>
      
      <!-- 主按钮区域 -->
      <div class="home-actions">
        <button class="btn-main-action" id="btn-main-action">
          <i class="fa-solid fa-clipboard-list" id="main-action-icon"></i>
          <span id="main-action-text">设置特工任务</span>
        </button>
      </div>
      
      <!-- AI提示 -->
      <p class="ai-disclaimer">小影老师由 AI 驱动</p>
    </div>
    
    <!-- ==========================================
         任务设置选择弹窗
         ========================================== -->
    <div class="modal" id="modal-task-choice">
      <div class="modal-overlay"></div>
      <div class="modal-content modal-choice">
        <div class="modal-header">
          <h2>设置特工任务</h2>
          <button class="modal-close" id="modal-choice-close">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body">
          <p class="choice-desc">选择任务设置方式</p>
          <div class="choice-options">
            <button class="choice-btn" id="choice-photo">
              <div class="choice-icon photo">
                <i class="fa-solid fa-camera"></i>
              </div>
              <div class="choice-info">
                <h3>拍作业单</h3>
                <p>拍照识别，智能生成任务</p>
              </div>
            </button>
            <button class="choice-btn" id="choice-quick">
              <div class="choice-icon quick">
                <i class="fa-solid fa-bolt"></i>
              </div>
              <div class="choice-info">
                <h3>快速设置</h3>
                <p>选择时长和科目</p>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ==========================================
         拍照识别作业页面
         ========================================== -->
    <div class="page page-photo" id="page-photo">
      <header class="page-header">
        <button class="btn-back" id="btn-back-photo">
          <i class="fa-solid fa-chevron-left"></i>
        </button>
        <h1 class="page-title">拍摄作业单</h1>
        <button class="btn-help">
          <i class="fa-solid fa-circle-question"></i>
        </button>
      </header>
      
      <!-- 拍照区域 -->
      <div class="photo-area">
        <div class="photo-preview" id="photo-preview">
          <video id="camera-preview" autoplay playsinline></video>
          <img id="captured-image" style="display: none;">
          
          <!-- 拍照引导框 -->
          <div class="photo-guide">
            <div class="guide-corner tl"></div>
            <div class="guide-corner tr"></div>
            <div class="guide-corner bl"></div>
            <div class="guide-corner br"></div>
          </div>
          
          <p class="photo-hint">将作业单放入框内拍摄</p>
        </div>
        
        <!-- 拍照按钮 -->
        <div class="photo-controls">
          <button class="photo-btn-gallery" id="btn-gallery">
            <i class="fa-solid fa-images"></i>
          </button>
          <button class="photo-btn-capture" id="btn-capture">
            <span class="capture-inner"></span>
          </button>
          <button class="photo-btn-flash" id="btn-flash">
            <i class="fa-solid fa-bolt"></i>
          </button>
        </div>
      </div>
      
      <!-- 识别结果区域 -->
      <div class="recognize-result" id="recognize-result" style="display: none;">
        <div class="result-header">
          <h3>识别到的任务</h3>
          <button class="btn-retake" id="btn-retake">重新拍摄</button>
        </div>
        <div class="result-list" id="result-list"></div>
        <div class="result-actions">
          <button class="btn-add-more" id="btn-add-more-task">
            <i class="fa-solid fa-plus"></i>
            添加任务
          </button>
          <button class="btn-confirm-result" id="btn-confirm-photo-tasks">
            确认任务
          </button>
        </div>
      </div>
    </div>
    
    <!-- ==========================================
         快速设置页面
         ========================================== -->
    <div class="page page-quick" id="page-quick">
      <header class="page-header">
        <button class="btn-back" id="btn-back-quick">
          <i class="fa-solid fa-chevron-left"></i>
        </button>
        <h1 class="page-title">设置特工任务</h1>
        <div style="width: 40px;"></div>
      </header>
      
      <div class="quick-content">
        <!-- 学习时长选择 -->
        <div class="quick-section">
          <h3 class="quick-section-title">任务时长</h3>
          <div class="duration-grid">
            <button class="duration-option" data-duration="15">
              <span class="duration-value">15</span>
              <span class="duration-unit">分钟</span>
            </button>
            <button class="duration-option active" data-duration="30">
              <span class="duration-value">30</span>
              <span class="duration-unit">分钟</span>
            </button>
            <button class="duration-option" data-duration="45">
              <span class="duration-value">45</span>
              <span class="duration-unit">分钟</span>
            </button>
            <button class="duration-option" data-duration="60">
              <span class="duration-value">60</span>
              <span class="duration-unit">分钟</span>
            </button>
          </div>
          <div class="custom-duration">
            <span>自定义：</span>
            <input type="number" id="custom-duration" min="5" max="120" placeholder="分钟">
          </div>
        </div>
        
        <!-- 学科选择 -->
        <div class="quick-section">
          <h3 class="quick-section-title">任务科目（可多选）</h3>
          <div class="subject-grid">
            <button class="subject-option active" data-subject="语文">
              <span class="subject-icon">📖</span>
              <span>语文</span>
            </button>
            <button class="subject-option" data-subject="数学">
              <span class="subject-icon">🔢</span>
              <span>数学</span>
            </button>
            <button class="subject-option" data-subject="英语">
              <span class="subject-icon">🔤</span>
              <span>英语</span>
            </button>
            <button class="subject-option" data-subject="科学">
              <span class="subject-icon">🔬</span>
              <span>科学</span>
            </button>
            <button class="subject-option" data-subject="阅读">
              <span class="subject-icon">📚</span>
              <span>阅读</span>
            </button>
            <button class="subject-option" data-subject="其他">
              <span class="subject-icon">✏️</span>
              <span>其他</span>
            </button>
          </div>
        </div>
        
        <!-- 任务类型 -->
        <div class="quick-section">
          <h3 class="quick-section-title">任务类型</h3>
          <div class="task-type-list">
            <label class="task-type-item">
              <input type="radio" name="taskType" value="homework" checked>
              <span class="type-content">
                <i class="fa-solid fa-pen"></i>
                <span>写作业</span>
              </span>
            </label>
            <label class="task-type-item">
              <input type="radio" name="taskType" value="reading">
              <span class="type-content">
                <i class="fa-solid fa-book-open"></i>
                <span>阅读</span>
              </span>
            </label>
            <label class="task-type-item">
              <input type="radio" name="taskType" value="recite">
              <span class="type-content">
                <i class="fa-solid fa-microphone"></i>
                <span>背诵</span>
              </span>
            </label>
          </div>
        </div>
        
        <!-- 背诵内容上传 -->
        <div class="recite-upload" id="recite-upload" style="display: none;">
          <h3 class="quick-section-title">上传背诵内容</h3>
          <div class="upload-area" id="upload-recite">
            <i class="fa-solid fa-cloud-arrow-up"></i>
            <p>点击上传图片或拍照</p>
            <span>支持拍摄课本、诗词等</span>
          </div>
        </div>
      </div>
      
      <div class="quick-footer">
        <button class="btn-start-quick" id="btn-start-quick">
          <i class="fa-solid fa-check"></i>
          确认任务
        </button>
      </div>
    </div>
    
    <!-- ==========================================
         视频督学页面
         ========================================== -->
    <div class="page page-study" id="page-study">
      <header class="study-header">
        <div class="study-timer">
          <i class="fa-solid fa-clock"></i>
          <span id="study-time">00:00</span>
        </div>
        <div class="study-status">
          <span class="status-dot active"></span>
          <span id="focus-status">执行中</span>
        </div>
        <button class="btn-minimize" id="btn-minimize">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </header>
      
      <!-- 虚拟人监督区 -->
      <div class="study-avatar-area">
        <div class="study-avatar-wrapper">
          <video 
            id="study-avatar-video" 
            class="study-avatar-video" 
            autoplay 
            loop 
            muted 
            playsinline
          >
            <source src="assets/images/xiaoying-avatar.mp4" type="video/mp4">
          </video>
        </div>
        
        <!-- AI说话气泡 -->
        <div class="speech-bubble" id="speech-bubble">
          <p id="ai-message">加油！你正在认真学习呢~</p>
        </div>
      </div>
      
      <!-- 当前任务卡片 -->
      <div class="current-task-card" id="current-task-card">
        <div class="task-badge">🎯 当前任务</div>
        <h3 class="task-title" id="current-task-name">语文作业</h3>
        <div class="task-progress-bar">
          <div class="task-progress-fill" id="task-progress" style="width: 0%"></div>
        </div>
        <div class="task-timer-info">
          <span class="time-elapsed" id="task-time-elapsed">00:00</span>
          <span class="time-divider">/</span>
          <span class="time-total" id="task-time-total">30:00</span>
        </div>
      </div>
      
      <!-- 任务队列 -->
      <div class="task-queue" id="task-queue-section">
        <p class="queue-label">接下来：</p>
        <div class="queue-items" id="queue-items"></div>
      </div>
      
      <!-- 底部控制栏 -->
      <div class="study-controls">
        <button class="control-btn" id="btn-pause">
          <i class="fa-solid fa-pause"></i>
          <span>暂停</span>
        </button>
        <button class="control-btn primary" id="btn-complete-task">
          <i class="fa-solid fa-check"></i>
          <span>完成</span>
        </button>
        <button class="control-btn danger" id="btn-end-study">
          <i class="fa-solid fa-stop"></i>
          <span>结束</span>
        </button>
      </div>
    </div>
    
    <!-- ==========================================
         任务完成页面
         ========================================== -->
    <div class="page page-complete" id="page-complete">
      <div class="complete-content">
        <div class="complete-animation">
          <div class="complete-icon">🎉</div>
        </div>
        
        <h1 class="complete-title">任务完成！</h1>
        <p class="complete-subtitle">特工表现出色！</p>
        
        <div class="complete-reward">
          <div class="reward-stars">
            <i class="fa-solid fa-star"></i>
            <span id="reward-stars">+50</span>
          </div>
          <p>获得特工积分</p>
        </div>
        
        <div class="complete-stats">
          <div class="complete-stat">
            <span class="stat-value" id="complete-duration">30</span>
            <span class="stat-label">学习分钟</span>
          </div>
          <div class="stat-divider"></div>
          <div class="complete-stat">
            <span class="stat-value" id="complete-tasks">3</span>
            <span class="stat-label">完成任务</span>
          </div>
          <div class="stat-divider"></div>
          <div class="complete-stat">
            <span class="stat-value" id="complete-focus">92%</span>
            <span class="stat-label">专注度</span>
          </div>
        </div>
        
        <!-- 等级提升提示 -->
        <div class="level-up-notice" id="level-up-notice" style="display: none;">
          <span class="level-up-icon">🎖️</span>
          <span>恭喜晋升为 <strong id="new-level">初级特工</strong>！</span>
        </div>
        
        <div class="complete-actions">
          <button class="btn-share" id="btn-share">
            <i class="fa-solid fa-share-nodes"></i>
            分享成就
          </button>
          <button class="btn-home" id="btn-complete-home">
            返回基地
          </button>
        </div>
      </div>
    </div>
    
    <!-- ==========================================
         手动添加任务弹窗
         ========================================== -->
    <div class="modal" id="modal-add-task">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>添加特工任务</h2>
          <button class="modal-close" id="modal-close">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>任务名称</label>
            <input type="text" id="input-task-name" placeholder="例如：语文作业、背诵古诗...">
          </div>
          <div class="form-group">
            <label>预计时间</label>
            <div class="time-selector">
              <button class="time-btn" data-time="10">10分钟</button>
              <button class="time-btn active" data-time="20">20分钟</button>
              <button class="time-btn" data-time="30">30分钟</button>
            </div>
          </div>
          <div class="form-group">
            <label>任务类型</label>
            <div class="type-selector">
              <button class="type-btn active" data-type="语文">📖 语文</button>
              <button class="type-btn" data-type="数学">🔢 数学</button>
              <button class="type-btn" data-type="英语">🔤 英语</button>
              <button class="type-btn" data-type="其他">✏️ 其他</button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-modal-confirm" id="btn-save-task">
            添加任务
          </button>
        </div>
      </div>
    </div>
    
    <!-- ==========================================
         首充/充值弹窗
         ========================================== -->
    <div class="modal" id="modal-recharge">
      <div class="modal-overlay"></div>
      <div class="modal-content modal-recharge">
        <div class="modal-header">
          <h2>🎁 首充特惠</h2>
          <button class="modal-close" id="modal-recharge-close">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="recharge-banner">
            <span class="recharge-tag">限时优惠</span>
            <h3>首次充值送双倍积分</h3>
          </div>
          <div class="recharge-options">
            <div class="recharge-option">
              <span class="coin-amount">100</span>
              <span class="coin-label">积分</span>
              <span class="price">¥6</span>
            </div>
            <div class="recharge-option popular">
              <span class="popular-tag">推荐</span>
              <span class="coin-amount">300</span>
              <span class="coin-label">积分</span>
              <span class="price">¥18</span>
              <span class="original-price">¥30</span>
            </div>
            <div class="recharge-option">
              <span class="coin-amount">600</span>
              <span class="coin-label">积分</span>
              <span class="price">¥30</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-recharge-confirm">立即充值</button>
        </div>
      </div>
    </div>
    
  </div>
  
  <!-- JavaScript -->
  <script src="js/app.js"></script>
</body>
</html>

